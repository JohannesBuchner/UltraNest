version: 2


jobs:
  
  build:
    
    docker:
      - image: circleci/python:latest
    
    steps: 
      
      - checkout
      - run: pip install linkchecker
      - run: ls
      - run: grep -Eo ':[a-zA-Z]{1,15}:' *.html|grep -vE ':(Author|Id|Copyright|License|root):'|grep -v ':GmwWqzssMkkJ:' || true
      - run: |
          if [ "$(LANG=C grep -h -v '<cite>:py' *.html | grep -Eo ':[a-zA-Z]{1,15}:' | grep -vE ':(Author|Id|Copyright|License|root):' | grep -v ':GmwWqzssMkkJ:')" -gt 0 ];
          then 
            exit 1;
          else
            exit 0;
          fi
      - run: linkchecker --ignore-url '.*fonts.*.eot' *.html
