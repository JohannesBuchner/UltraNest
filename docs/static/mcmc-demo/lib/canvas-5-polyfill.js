/**
 * Copyright 2014 Google Inc. All rights reserved.
 *
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 *
 * @fileoverview Description of this file.
 *
 * A polyfill for HTML Canvas features, including
 * Path2D support.
 */
void 0==CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(t,r,n,e,o,a,i,s){this.save(),this.translate(t,r),this.rotate(o),this.scale(n,e),this.arc(0,0,1,a,i,s),this.restore()}),"function"!=typeof Path2D&&!function(){function t(t){if(this.ops_=[],void 0!=t)if("string"==typeof t)try{this.ops_=parser.parse(t)}catch(r){}else{if(!t.hasOwnProperty("ops_"))throw"Error: "+typeof t+"is not a valid argument to Path";this.ops_=t.ops_.slice(0)}}function r(t){return function(){this.ops_.push({type:t,args:Array.prototype.slice.call(arguments,0)})}}parser=function(){function t(t,r){function n(){this.constructor=t}n.prototype=r.prototype,t.prototype=new n}function r(t,r,n,e,o,a){this.message=t,this.expected=r,this.found=n,this.offset=e,this.line=o,this.column=a,this.name="SyntaxError"}function n(t){function n(r){function n(r,n,e){var o,a;for(o=n;e>o;o++)a=t.charAt(o),"\n"===a?(r.seenCR||r.line++,r.column=1,r.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(r.line++,r.column=1,r.seenCR=!0):(r.column++,r.seenCR=!1)}return Ar!==r&&(Ar>r&&(Ar=0,xr={line:1,column:1,seenCR:!1}),n(xr,Ar,r),Ar=r),xr}function e(t){mr>Cr||(Cr>mr&&(mr=Cr,Pr=[]),Pr.push(t))}function o(e,o,a){function i(t){var r=1;for(t.sort(function(t,r){return t.description<r.description?-1:t.description>r.description?1:0});r<t.length;)t[r-1]===t[r]?t.splice(r,1):r++}function s(t,r){function n(t){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+r(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+r(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+r(t)})}var e,o,a,i=new Array(t.length);for(a=0;a<t.length;a++)i[a]=t[a].description;return e=t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0],o=r?'"'+n(r)+'"':"end of input","Expected "+e+" but "+o+" found."}var u=n(a),c=a<t.length?t.charAt(a):null;return null!==o&&i(o),new r(null!==e?e:s(o,c),o,c,a,u.line,u.column)}function a(){var t,r,n,e,o;for(t=Cr,r=[],n=B();n!==lt;)r.push(n),n=B();if(r!==lt)if(n=i(),n===lt&&(n=gt),n!==lt){for(e=[],o=B();o!==lt;)e.push(o),o=B();e!==lt?(_r=t,r=yt(n),t=r):(Cr=t,t=vt)}else Cr=t,t=vt;else Cr=t,t=vt;return t}function i(){var t,r,n,e,o;if(t=Cr,r=s(),r!==lt){for(n=Cr,e=[],o=B();o!==lt;)e.push(o),o=B();e!==lt?(o=i(),o!==lt?(e=[e,o],n=e):(Cr=n,n=vt)):(Cr=n,n=vt),n===lt&&(n=gt),n!==lt?(r=[r,n],t=r):(Cr=t,t=vt)}else Cr=t,t=vt;return t}function s(){var t,r,n,e,o;if(t=Cr,r=p(),r!==lt){for(n=Cr,e=[],o=B();o!==lt;)e.push(o),o=B();e!==lt?(o=u(),o!==lt?(e=[e,o],n=e):(Cr=n,n=vt)):(Cr=n,n=vt),n===lt&&(n=gt),n!==lt?(r=[r,n],t=r):(Cr=t,t=vt)}else Cr=t,t=vt;return t}function u(){var t,r,n,e,o;if(t=Cr,r=c(),r!==lt){for(n=Cr,e=[],o=B();o!==lt;)e.push(o),o=B();e!==lt?(o=u(),o!==lt?(e=[e,o],n=e):(Cr=n,n=vt)):(Cr=n,n=vt),n===lt&&(n=gt),n!==lt?(r=[r,n],t=r):(Cr=t,t=vt)}else Cr=t,t=vt;return t}function c(){var t;return t=f(),t===lt&&(t=h(),t===lt&&(t=g(),t===lt&&(t=d(),t===lt&&(t=C(),t===lt&&(t=x(),t===lt&&(t=R(),t===lt&&(t=D(),t===lt&&(t=b())))))))),t}function p(){var r,n,o,a;if(r=Cr,dt.test(t.charAt(Cr))?(n=t.charAt(Cr),Cr++):(n=lt,0===Rr&&e(Ct)),n!==lt){for(o=[],a=B();a!==lt;)o.push(a),a=B();o!==lt?(a=l(),a!==lt?(_r=r,n=_t(n,a),r=n):(Cr=r,r=vt)):(Cr=r,r=vt)}else Cr=r,r=vt;return r}function l(){var t,r,n,e,o;return t=Cr,r=q(),r!==lt?(n=Cr,e=z(),e===lt&&(e=gt),e!==lt?(o=v(),o!==lt?(e=[e,o],n=e):(Cr=n,n=vt)):(Cr=n,n=vt),n===lt&&(n=gt),n!==lt?(_r=t,r=At(r,n),t=r):(Cr=t,t=vt)):(Cr=t,t=vt),t}function f(){var r,n;return r=Cr,xt.test(t.charAt(Cr))?(n=t.charAt(Cr),Cr++):(n=lt,0===Rr&&e(mt)),n!==lt&&(_r=r,n=Pt()),r=n}function h(){var r,n,o,a;if(r=Cr,Rt.test(t.charAt(Cr))?(n=t.charAt(Cr),Cr++):(n=lt,0===Rr&&e(Mt)),n!==lt){for(o=[],a=B();a!==lt;)o.push(a),a=B();o!==lt?(a=v(),a!==lt?(_r=r,n=wt(n,a),r=n):(Cr=r,r=vt)):(Cr=r,r=vt)}else Cr=r,r=vt;return r}function v(){var t,r,n,e,o;return t=Cr,r=q(),r!==lt?(n=Cr,e=z(),e===lt&&(e=gt),e!==lt?(o=v(),o!==lt?(e=[e,o],n=e):(Cr=n,n=vt)):(Cr=n,n=vt),n===lt&&(n=gt),n!==lt?(_r=t,r=At(r,n),t=r):(Cr=t,t=vt)):(Cr=t,t=vt),t}function g(){var r,n,o,a;if(r=Cr,Dt.test(t.charAt(Cr))?(n=t.charAt(Cr),Cr++):(n=lt,0===Rr&&e(Tt)),n!==lt){for(o=[],a=B();a!==lt;)o.push(a),a=B();o!==lt?(a=y(),a!==lt?(_r=r,n=bt(n,a),r=n):(Cr=r,r=vt)):(Cr=r,r=vt)}else Cr=r,r=vt;return r}function y(){var t,r,n,e,o;return t=Cr,r=E(),r!==lt?(n=Cr,e=z(),e===lt&&(e=gt),e!==lt?(o=y(),o!==lt?(e=[e,o],n=e):(Cr=n,n=vt)):(Cr=n,n=vt),n===lt&&(n=gt),n!==lt?(_r=t,r=At(r,n),t=r):(Cr=t,t=vt)):(Cr=t,t=vt),t}function d(){var r,n,o,a;if(r=Cr,Ft.test(t.charAt(Cr))?(n=t.charAt(Cr),Cr++):(n=lt,0===Rr&&e(kt)),n!==lt){for(o=[],a=B();a!==lt;)o.push(a),a=B();o!==lt?(a=y(),a!==lt?(_r=r,n=qt(n,a),r=n):(Cr=r,r=vt)):(Cr=r,r=vt)}else Cr=r,r=vt;return r}function C(){var r,n,o,a;if(r=Cr,Et.test(t.charAt(Cr))?(n=t.charAt(Cr),Cr++):(n=lt,0===Rr&&e(St)),n!==lt){for(o=[],a=B();a!==lt;)o.push(a),a=B();o!==lt?(a=_(),a!==lt?(_r=r,n=It(n,a),r=n):(Cr=r,r=vt)):(Cr=r,r=vt)}else Cr=r,r=vt;return r}function _(){var t,r,n,e,o;return t=Cr,r=A(),r!==lt?(n=Cr,e=z(),e===lt&&(e=gt),e!==lt?(o=_(),o!==lt?(e=[e,o],n=e):(Cr=n,n=vt)):(Cr=n,n=vt),n===lt&&(n=gt),n!==lt?(_r=t,r=At(r,n),t=r):(Cr=t,t=vt)):(Cr=t,t=vt),t}function A(){var t,r,n,e,o,a;return t=Cr,r=q(),r!==lt?(n=z(),n===lt&&(n=gt),n!==lt?(e=q(),e!==lt?(o=z(),o===lt&&(o=gt),o!==lt?(a=q(),a!==lt?(_r=t,r=Ot(r,e,a),t=r):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt),t}function x(){var r,n,o,a;if(r=Cr,zt.test(t.charAt(Cr))?(n=t.charAt(Cr),Cr++):(n=lt,0===Rr&&e(jt)),n!==lt){for(o=[],a=B();a!==lt;)o.push(a),a=B();o!==lt?(a=m(),a!==lt?(_r=r,n=Ht(n,a),r=n):(Cr=r,r=vt)):(Cr=r,r=vt)}else Cr=r,r=vt;return r}function m(){var t,r,n,e,o;return t=Cr,r=P(),r!==lt?(n=Cr,e=z(),e===lt&&(e=gt),e!==lt?(o=m(),o!==lt?(e=[e,o],n=e):(Cr=n,n=vt)):(Cr=n,n=vt),n===lt&&(n=gt),n!==lt?(_r=t,r=At(r,n),t=r):(Cr=t,t=vt)):(Cr=t,t=vt),t}function P(){var t,r,n,e;return t=Cr,r=q(),r!==lt?(n=z(),n===lt&&(n=gt),n!==lt?(e=q(),e!==lt?(_r=t,r=Qt(r,e),t=r):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt),t}function R(){var r,n,o,a;if(r=Cr,Vt.test(t.charAt(Cr))?(n=t.charAt(Cr),Cr++):(n=lt,0===Rr&&e(Lt)),n!==lt){for(o=[],a=B();a!==lt;)o.push(a),a=B();o!==lt?(a=M(),a!==lt?(_r=r,n=Zt(n,a),r=n):(Cr=r,r=vt)):(Cr=r,r=vt)}else Cr=r,r=vt;return r}function M(){var t,r,n,e,o;return t=Cr,r=w(),r!==lt?(n=Cr,e=z(),e===lt&&(e=gt),e!==lt?(o=M(),o!==lt?(e=[e,o],n=e):(Cr=n,n=vt)):(Cr=n,n=vt),n===lt&&(n=gt),n!==lt?(_r=t,r=At(r,n),t=r):(Cr=t,t=vt)):(Cr=t,t=vt),t}function w(){var t,r,n,e;return t=Cr,r=q(),r!==lt?(n=z(),n===lt&&(n=gt),n!==lt?(e=q(),e!==lt?(_r=t,r=Qt(r,e),t=r):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt),t}function D(){var r,n,o,a;if(r=Cr,Bt.test(t.charAt(Cr))?(n=t.charAt(Cr),Cr++):(n=lt,0===Rr&&e(Ut)),n!==lt){for(o=[],a=B();a!==lt;)o.push(a),a=B();o!==lt?(a=T(),a!==lt?(_r=r,n=Gt(n,a),r=n):(Cr=r,r=vt)):(Cr=r,r=vt)}else Cr=r,r=vt;return r}function T(){var t,r,n,e,o;return t=Cr,r=q(),r!==lt?(n=Cr,e=z(),e===lt&&(e=gt),e!==lt?(o=T(),o!==lt?(e=[e,o],n=e):(Cr=n,n=vt)):(Cr=n,n=vt),n===lt&&(n=gt),n!==lt?(_r=t,r=At(r,n),t=r):(Cr=t,t=vt)):(Cr=t,t=vt),t}function b(){var r,n,o,a;if(r=Cr,Jt.test(t.charAt(Cr))?(n=t.charAt(Cr),Cr++):(n=lt,0===Rr&&e(Kt)),n!==lt){for(o=[],a=B();a!==lt;)o.push(a),a=B();o!==lt?(a=F(),a!==lt?(_r=r,n=Nt(n,a),r=n):(Cr=r,r=vt)):(Cr=r,r=vt)}else Cr=r,r=vt;return r}function F(){var t,r,n,e,o;return t=Cr,r=k(),r!==lt?(n=Cr,e=z(),e===lt&&(e=gt),e!==lt?(o=F(),o!==lt?(e=[e,o],n=e):(Cr=n,n=vt)):(Cr=n,n=vt),n===lt&&(n=gt),n!==lt?(_r=t,r=At(r,n),t=r):(Cr=t,t=vt)):(Cr=t,t=vt),t}function k(){var t,r,n,e,o,a,i,s,u,c,p,l;return t=Cr,r=S(),r!==lt?(n=z(),n===lt&&(n=gt),n!==lt?(e=S(),e!==lt?(o=z(),o===lt&&(o=gt),o!==lt?(a=I(),a!==lt?(i=z(),i!==lt?(s=O(),s!==lt?(u=z(),u===lt&&(u=gt),u!==lt?(c=O(),c!==lt?(p=z(),p===lt&&(p=gt),p!==lt?(l=q(),l!==lt?(_r=t,r=Wt(r,e,a,s,c,l),t=r):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt),t}function q(){var t,r,n,e;return t=Cr,r=E(),r!==lt?(n=z(),n===lt&&(n=gt),n!==lt?(e=E(),e!==lt?(_r=t,r=Xt(r,e),t=r):(Cr=t,t=vt)):(Cr=t,t=vt)):(Cr=t,t=vt),t}function E(){var t,r;return t=Cr,r=I(),r!==lt&&(_r=t,r=Yt(r)),t=r}function S(){var t;return t=H(),t===lt&&(t=Z()),t}function I(){var t,r,n;return t=Cr,r=L(),r===lt&&(r=gt),r!==lt?(n=H(),n!==lt?(r=[r,n],t=r):(Cr=t,t=vt)):(Cr=t,t=vt),t===lt&&(t=Cr,r=L(),r===lt&&(r=gt),r!==lt?(n=Z(),n!==lt?(r=[r,n],t=r):(Cr=t,t=vt)):(Cr=t,t=vt)),t}function O(){var r;return 48===t.charCodeAt(Cr)?(r=$t,Cr++):(r=lt,0===Rr&&e(tr)),r===lt&&(49===t.charCodeAt(Cr)?(r=rr,Cr++):(r=lt,0===Rr&&e(nr))),r}function z(){var t,r,n,e,o;if(t=Cr,r=[],n=B(),n!==lt)for(;n!==lt;)r.push(n),n=B();else r=vt;if(r!==lt)if(n=j(),n===lt&&(n=gt),n!==lt){for(e=[],o=B();o!==lt;)e.push(o),o=B();e!==lt?(r=[r,n,e],t=r):(Cr=t,t=vt)}else Cr=t,t=vt;else Cr=t,t=vt;if(t===lt)if(t=Cr,r=j(),r!==lt){for(n=[],e=B();e!==lt;)n.push(e),e=B();n!==lt?(r=[r,n],t=r):(Cr=t,t=vt)}else Cr=t,t=vt;return t}function j(){var r;return 44===t.charCodeAt(Cr)?(r=er,Cr++):(r=lt,0===Rr&&e(or)),r}function H(){var t,r,n;return t=Cr,r=Q(),r!==lt?(n=V(),n===lt&&(n=gt),n!==lt?(r=[r,n],t=r):(Cr=t,t=vt)):(Cr=t,t=vt),t===lt&&(t=Cr,r=Z(),r!==lt?(n=V(),n!==lt?(r=[r,n],t=r):(Cr=t,t=vt)):(Cr=t,t=vt)),t}function Q(){var r,n,o,a;return r=Cr,n=Z(),n===lt&&(n=gt),n!==lt?(46===t.charCodeAt(Cr)?(o=ar,Cr++):(o=lt,0===Rr&&e(ir)),o!==lt?(a=Z(),a!==lt?(n=[n,o,a],r=n):(Cr=r,r=vt)):(Cr=r,r=vt)):(Cr=r,r=vt),r===lt&&(r=Cr,n=Z(),n!==lt?(46===t.charCodeAt(Cr)?(o=ar,Cr++):(o=lt,0===Rr&&e(ir)),o!==lt?(n=[n,o],r=n):(Cr=r,r=vt)):(Cr=r,r=vt)),r}function V(){var r,n,o,a;return r=Cr,sr.test(t.charAt(Cr))?(n=t.charAt(Cr),Cr++):(n=lt,0===Rr&&e(ur)),n!==lt?(o=L(),o===lt&&(o=gt),o!==lt?(a=Z(),a!==lt?(n=[n,o,a],r=n):(Cr=r,r=vt)):(Cr=r,r=vt)):(Cr=r,r=vt),r}function L(){var r;return 43===t.charCodeAt(Cr)?(r=cr,Cr++):(r=lt,0===Rr&&e(pr)),r===lt&&(45===t.charCodeAt(Cr)?(r=lr,Cr++):(r=lt,0===Rr&&e(fr))),r}function Z(){var r,n,o;if(r=Cr,n=[],hr.test(t.charAt(Cr))?(o=t.charAt(Cr),Cr++):(o=lt,0===Rr&&e(vr)),o!==lt)for(;o!==lt;)n.push(o),hr.test(t.charAt(Cr))?(o=t.charAt(Cr),Cr++):(o=lt,0===Rr&&e(vr));else n=vt;return n!==lt&&(_r=r,n=gr(n)),r=n}function B(){var r;return yr.test(t.charAt(Cr))?(r=t.charAt(Cr),Cr++):(r=lt,0===Rr&&e(dr)),r}function U(t,r){return-1==="mlazhvcsqt".indexOf(t)?Mr=r:(Mr[0]+=r[0],Mr[1]+=r[1]),br=t,Mr.slice(0)}function G(t,r){for(var n=[],e=Mr.slice(0),o=0;o<r.length;o+=2){Mr=e.slice(0);var a=U(t,r.slice(o,o+2));n=n.concat(a),o==r.length-4&&(wr=a.slice(0))}return n}function J(){-1=="CcSsQqTt".indexOf(br)&&(wr=Mr.slice(0));var t=[0,0];return t[0]=2*Mr[0]-wr[0],t[1]=2*Mr[1]-wr[1],t}function K(t,r){var n=[r,0];return"H"==t&&(n[1]=Mr[1]),U(t,n)}function N(t,r){var n=[0,r];return"V"==t&&(n[0]=Mr[0]),U(t,n)}function W(t,r){var n=[t];if(r&&r.length>1)for(var e=r[1],o=0;o<e.length;o++)n.push(e[o]);return n}function X(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function Y(t,r){return t[0]*r[0]+t[1]*r[1]}function $(t,r){return Y(t,r)/(X(t)*X(r))}function tt(t,r){var n=1;return t[0]*r[1]-t[1]*r[0]<0&&(n=-1),n*Math.acos($(t,r))}function rt(t,r){var n=Math.cos(r),e=Math.sin(r);return[n*t[0]+e*t[1],-1*e*t[0]+n*t[1]]}function nt(t,r){var n=Math.cos(r),e=Math.sin(r);return[n*t[0]-e*t[1],e*t[0]+n*t[1]]}function et(t,r){return[(t[0]-r[0])/2,(t[1]-r[1])/2]}function ot(t,r){return[(t[0]+r[0])/2,(t[1]+r[1])/2]}function at(t,r){return[t[0]*r[0],t[1]*r[1]]}function it(t,r){return[t*r[0],t*r[1]]}function st(t,r){return[t[0]+r[0],t[1]+r[1]]}function ut(t,r,n,e,o,a,i){if(0==r||0==n)return void Dr.push({type:"lineTo",args:i});var e=e*(Math.PI/180);r=Math.abs(r),n=Math.abs(n);var s=rt(et(t,i),e),u=at(s,s),c=Math.pow(r,2),p=Math.pow(n,2),l=Math.sqrt(u[0]/c+u[1]/p);l>1&&(r*=l,n*=l,c=Math.pow(r,2),p=Math.pow(n,2));var f=Math.sqrt((c*p-c*u[1]-p*u[0])/(c*u[1]+p*u[0]));o==a&&(f*=-1);var h=it(f,[r*s[1]/n,-n*s[0]/r]),v=st(nt(h,e),ot(t,i)),g=[(s[0]-h[0])/r,(s[1]-h[1])/n],y=[(-1*s[0]-h[0])/r,(-1*s[1]-h[1])/n],d=tt([1,0],g),C=tt(g,y),_=d,A=d+C;Dr.push({type:"save",args:[]},{type:"translate",args:[v[0],v[1]]},{type:"rotate",args:[e]},{type:"scale",args:[r,n]},{type:"arc",args:[0,0,1,_,A,1-a]},{type:"restore",args:[]})}var ct,pt=arguments.length>1?arguments[1]:{},lt={},ft={svg_path:a},ht=a,vt=lt,gt=null,yt=function(t){return Dr},dt=/^[Mm]/,Ct={type:"class",value:"[Mm]",description:"[Mm]"},_t=function(t,r){var n=t;Tr&&(n="M",Tr=!1),Dr.push({type:"moveTo",args:U(n,r[0])});for(var e=1;e<r.length;e++)Dr.push({type:"lineTo",args:U(t,r[e])})},At=function(t,r){return W(t,r)},xt=/^[Zz]/,mt={type:"class",value:"[Zz]",description:"[Zz]"},Pt=function(){Dr.push({type:"closePath",args:[]})},Rt=/^[Ll]/,Mt={type:"class",value:"[Ll]",description:"[Ll]"},wt=function(t,r){for(var n=0;n<r.length;n++)Dr.push({type:"lineTo",args:U(t,r[n])})},Dt=/^[Hh]/,Tt={type:"class",value:"[Hh]",description:"[Hh]"},bt=function(t,r){for(var n=0;n<r.length;n++)Dr.push({type:"lineTo",args:K(t,r[n])})},Ft=/^[Vv]/,kt={type:"class",value:"[Vv]",description:"[Vv]"},qt=function(t,r){for(var n=0;n<r.length;n++)Dr.push({type:"lineTo",args:N(t,r[n])})},Et=/^[Cc]/,St={type:"class",value:"[Cc]",description:"[Cc]"},It=function(t,r){for(var n=0;n<r.length;n++)Dr.push({type:"bezierCurveTo",args:G(t,r[n])})},Ot=function(t,r,n){return t.concat(r,n)},zt=/^[Ss]/,jt={type:"class",value:"[Ss]",description:"[Ss]"},Ht=function(t,r){for(var n=0;n<r.length;n++)Dr.push({type:"bezierCurveTo",args:J().concat(G(t,r[n]))})},Qt=function(t,r){return t.concat(r)},Vt=/^[Qq]/,Lt={type:"class",value:"[Qq]",description:"[Qq]"},Zt=function(t,r){for(var n=0;n<r.length;n++)Dr.push({type:"quadraticCurveTo",args:G(t,r[n])})},Bt=/^[Tt]/,Ut={type:"class",value:"[Tt]",description:"[Tt]"},Gt=function(t,r){for(var n=0;n<r.length;n++){var e=J();Dr.push({type:"quadraticCurveTo",args:e.concat(G(t,r[n]))}),wr=e.slice(0)}},Jt=/^[Aa]/,Kt={type:"class",value:"[Aa]",description:"[Aa]"},Nt=function(t,r){for(var n=0;n<r.length;n++){var e=[Mr.slice()],o=[U(t,r[n].slice(-2))];absArgs=e.concat(r[n].slice(0,-2),o),ut.apply(this,absArgs)}},Wt=function(t,r,n,e,o,a){return[parseFloat(t),parseFloat(r),parseFloat(n.join("")),parseInt(e),parseInt(o),a[0],a[1]]},Xt=function(t,r){return[t,r]},Yt=function(t){return parseFloat(t.join(""))},$t="0",tr={type:"literal",value:"0",description:'"0"'},rr="1",nr={type:"literal",value:"1",description:'"1"'},er=",",or={type:"literal",value:",",description:'","'},ar=".",ir={type:"literal",value:".",description:'"."'},sr=/^[eE]/,ur={type:"class",value:"[eE]",description:"[eE]"},cr="+",pr={type:"literal",value:"+",description:'"+"'},lr="-",fr={type:"literal",value:"-",description:'"-"'},hr=/^[0-9]/,vr={type:"class",value:"[0-9]",description:"[0-9]"},gr=function(t){return t.join("")},yr=/^[ \t\n\r]/,dr={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},Cr=0,_r=0,Ar=0,xr={line:1,column:1,seenCR:!1},mr=0,Pr=[],Rr=0;if("startRule"in pt){if(!(pt.startRule in ft))throw new Error("Can't start parsing from rule \""+pt.startRule+'".');ht=ft[pt.startRule]}var Mr=[0,0],wr=[0,0],Dr=[],Tr=!0,br="";if(ct=ht(),ct!==lt&&Cr===t.length)return ct;throw ct!==lt&&Cr<t.length&&e({type:"end",description:"end of input"}),o(null,Pr,mr)}return t(r,Error),{SyntaxError:r,parse:n}}();for(var n=["closePath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","rect","arc","arcTo","ellipse","isPointInPath","isPointInStroke"],e=0;e<n.length;e++){var o=n[e];t.prototype[o]=r(o)}t.prototype.addPath=function(t,r){var n=!1;r&&r.hasOwnProperty("a")&&r.hasOwnProperty("b")&&r.hasOwnProperty("c")&&r.hasOwnProperty("d")&&r.hasOwnProperty("e")&&r.hasOwnProperty("f")&&(n=!0,this.ops_.push({type:"save",args:[]}),this.ops_.push({type:"transform",args:[r.a,r.b,r.c,r.d,r.e,r.f]})),this.ops_=this.ops_.concat(t.ops_),n&&this.ops_.push({type:"restore",args:[]})},original_fill=CanvasRenderingContext2D.prototype.fill,original_stroke=CanvasRenderingContext2D.prototype.stroke,original_clip=CanvasRenderingContext2D.prototype.clip,original_is_point_in_path=CanvasRenderingContext2D.prototype.isPointInPath,original_is_point_in_stroke=CanvasRenderingContext2D.prototype.isPointInStroke,CanvasRenderingContext2D.prototype.fill=function(r){if(r instanceof t){this.beginPath();for(var n=0,e=r.ops_.length;e>n;n++){var o=r.ops_[n];CanvasRenderingContext2D.prototype[o.type].apply(this,o.args)}original_fill.apply(this,Array.prototype.slice.call(arguments,1))}else original_fill.apply(this,arguments)},CanvasRenderingContext2D.prototype.stroke=function(r){if(r instanceof t){this.beginPath();for(var n=0,e=r.ops_.length;e>n;n++){var o=r.ops_[n];CanvasRenderingContext2D.prototype[o.type].apply(this,o.args)}original_stroke.call(this)}else original_stroke.call(this)},CanvasRenderingContext2D.prototype.clip=function(r){if(r instanceof t){this.beginPath();for(var n=0,e=r.ops_.length;e>n;n++){var o=r.ops_[n];CanvasRenderingContext2D.prototype[o.type].apply(this,o.args)}original_clip.apply(this,Array.prototype.slice.call(arguments,1))}else original_clip.apply(this,arguments)},CanvasRenderingContext2D.prototype.isPointInPath=function(r){if(r instanceof t){this.beginPath();for(var n=0,e=r.ops_.length;e>n;n++){var o=r.ops_[n];CanvasRenderingContext2D.prototype[o.type].apply(this,o.args)}return original_is_point_in_path.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_path.apply(this,arguments)},CanvasRenderingContext2D.prototype.isPointInStroke=function(r){if(r instanceof t){this.beginPath();for(var n=0,e=r.ops_.length;e>n;n++){var o=r.ops_[n];CanvasRenderingContext2D.prototype[o.type].apply(this,o.args)}return original_is_point_in_stroke.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_stroke.apply(this,arguments)},Path2D=t}();